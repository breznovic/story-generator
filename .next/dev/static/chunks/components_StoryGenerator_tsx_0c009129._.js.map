{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Programming/React/story-generator/components/StoryGenerator.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useGenerateStoryMutation } from \"../lib/api/storiesApi\";\r\nimport type { SocialClass } from \"../lib/api/storiesApi\";\r\n\r\nconst REGIONS = [\r\n  \"England\",\r\n  \"France\",\r\n  \"Germany\",\r\n  \"Italy\",\r\n  \"Spain\",\r\n  \"Scotland\",\r\n  \"Ireland\",\r\n  \"Wales\",\r\n  \"Byzantium\",\r\n  \"Holy Land\",\r\n];\r\n\r\nconst SOCIAL_CLASSES: { value: SocialClass; label: string; emoji: string }[] = [\r\n  { value: \"peasant\", label: \"Peasant\", emoji: \"üåæ\" },\r\n  { value: \"knight\", label: \"Knight\", emoji: \"‚öîÔ∏è\" },\r\n  { value: \"merchant\", label: \"Merchant\", emoji: \"üí∞\" },\r\n  { value: \"noble\", label: \"Noble\", emoji: \"üëë\" },\r\n  { value: \"cleric\", label: \"Cleric\", emoji: \"‚õ™\" },\r\n];\r\n\r\nexport default function StoryGenerator() {\r\n  const [socialClass, setSocialClass] = useState<SocialClass>(\"peasant\");\r\n  const [region, setRegion] = useState(REGIONS[0]);\r\n  const [includeConflict, setIncludeConflict] = useState(true);\r\n\r\n  const [generateStory, { data: story, isLoading, error, reset }] =\r\n    useGenerateStoryMutation();\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      await generateStory({\r\n        social_class: socialClass,\r\n        region,\r\n        include_conflict: Boolean(includeConflict),\r\n      }).unwrap();\r\n    } catch (err) {\r\n      console.error(\"Failed to generate story:\", err);\r\n    }\r\n  };\r\n\r\n  const handleReset = () => {\r\n    reset();\r\n    setSocialClass(\"peasant\");\r\n    setRegion(REGIONS[0]);\r\n    setIncludeConflict(true);\r\n  };\r\n\r\n  return (\r\n    <div className=\"card\">\r\n      <h2>Generate New Story</h2>\r\n\r\n      <form onSubmit={handleSubmit}>\r\n        <div className=\"form-group\">\r\n          <label className=\"form-label\">Social Class</label>\r\n          <div className=\"social-class-grid\">\r\n            {SOCIAL_CLASSES.map((sc) => (\r\n              <button\r\n                key={sc.value}\r\n                type=\"button\"\r\n                onClick={() => setSocialClass(sc.value)}\r\n                className={`social-class-button ${\r\n                  socialClass === sc.value ? \"active\" : \"\"\r\n                }`}\r\n              >\r\n                <div className=\"social-class-emoji\">{sc.emoji}</div>\r\n                <div className=\"social-class-label\">{sc.label}</div>\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"region\" className=\"form-label\">\r\n            Region\r\n          </label>\r\n          <select\r\n            id=\"region\"\r\n            value={region}\r\n            onChange={(e) => setRegion(e.target.value)}\r\n            className=\"form-select\"\r\n          >\r\n            {REGIONS.map((region) => (\r\n              <option key={region} value={region}>\r\n                {region}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"form-group\">\r\n          <div className=\"checkbox-group\">\r\n            <input\r\n              id=\"includeConflict\"\r\n              type=\"checkbox\"\r\n              checked={includeConflict}\r\n              onChange={(e) => setIncludeConflict(e.target.checked)}\r\n              className=\"checkbox\"\r\n            />\r\n            <label htmlFor=\"includeConflict\">Include historical conflict</label>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"button-group\">\r\n          <button\r\n            type=\"submit\"\r\n            disabled={isLoading}\r\n            className=\"btn btn-primary\"\r\n          >\r\n            {isLoading ? \"Generating...\" : \"Generate Story\"}\r\n          </button>\r\n\r\n          <button type=\"button\" onClick={handleReset} className=\"btn-secondary\">\r\n            Reset\r\n          </button>\r\n        </div>\r\n      </form>\r\n\r\n      {error && (\r\n        <div className=\"error-message\">\r\n          Error:{\" \"}\r\n          {\"data\" in error\r\n            ? JSON.stringify(error.data)\r\n            : \"Failed to generate story\"}\r\n        </div>\r\n      )}\r\n\r\n      {story && (\r\n        <div className=\"story-result\">\r\n          <div className=\"story-header\">\r\n            <h3 className=\"story-title\">Your Story</h3>\r\n            <span className=\"story-date\">\r\n              {new Date(story.created_at).toLocaleDateString()}\r\n            </span>\r\n          </div>\r\n          <p className=\"story-content\">{story.story}</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}